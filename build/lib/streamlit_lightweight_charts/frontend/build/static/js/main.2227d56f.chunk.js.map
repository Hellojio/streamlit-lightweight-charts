{"version":3,"sources":["LightweightCharts.tsx","index.tsx"],"names":["LightweightCharts","renderData","useRenderData","chartOptions","args","series","chartContainerRef","useRef","useEffect","current","_chartContainerRef$cu2","handleResize","_chartContainerRef$cu","chart","applyOptions","width","clientWidth","createChart","_objectSpread","height","timeScale","fitContent","_step","_iterator","_createForOfIteratorHelper","s","n","done","seriesObject","value","newSeries","type","addAreaSeries","options","addBarSeries","addBaselineSeries","addCandlestickSeries","addHistogramSeries","addLineSeries","priceScale","priceScaleId","setData","data","err","e","f","window","addEventListener","removeEventListener","remove","React","createElement","ref","ReactDOM","render","StrictMode","StreamlitProvider","document","getElementById"],"mappings":"4PA4EeA,EAxEsB,WAInC,IAAMC,EAAaC,0BACbC,EAAeF,EAAWG,KAAmB,aAC7CC,EAASJ,EAAWG,KAAa,OAEjCE,EAAoBC,iBAAuB,MA2DlD,OAzDCC,qBACA,WACI,GAAGF,EAAkBG,QAAQ,CAAC,IAADC,EACrBC,EAAe,WAAO,IAADC,EACzBC,EAAMC,aAAa,CAAEC,MAAwB,OAAjBT,QAAiB,IAAjBA,GAA0B,QAATM,EAAjBN,EAAmBG,eAAO,IAAAG,OAAT,EAAjBA,EAA4BI,eAGpDH,EAAQI,YAA6B,OAAjBX,QAAiB,IAAjBA,OAAiB,EAAjBA,EAAmBG,QAAOS,wBAAA,CAClDC,OAAQ,KACLhB,GAAY,IACfY,MAAwB,OAAjBT,QAAiB,IAAjBA,GAA0B,QAATI,EAAjBJ,EAAmBG,eAAO,IAAAC,OAAT,EAAjBA,EAA4BM,eAGrCH,EAAMO,YAAYC,aAAa,IAEEC,EAFFC,EAAAC,YAEJnB,GAAM,IAAjC,IAAAkB,EAAAE,MAAAH,EAAAC,EAAAG,KAAAC,MAAkC,CAAC,IAAxBC,EAAYN,EAAAO,MAEjBC,OAAS,EACb,OAAOF,EAAaG,MAClB,IAAK,OACHD,EAAYjB,EAAMmB,cAAcJ,EAAaK,SAC7C,MACF,IAAK,MACHH,EAAYjB,EAAMqB,aAAaN,EAAaK,SAC5C,MACF,IAAK,WACHH,EAAYjB,EAAMsB,kBAAkBP,EAAaK,SACjD,MACF,IAAK,cACHH,EAAYjB,EAAMuB,qBAAqBR,EAAaK,SACpD,MACF,IAAK,YACHH,EAAYjB,EAAMwB,mBAAmBT,EAAaK,SAClD,MACF,IAAK,OACHH,EAAYjB,EAAMyB,cAAcV,EAAaK,SAC7C,MACF,QACI,OAGHL,EAAaW,YACd1B,EAAM0B,WAAWX,EAAaK,QAAQO,cAAgB,IAAI1B,aAAac,EAAaW,YAEtFT,EAAUW,QAAQb,EAAac,OAChC,MAAAC,GAAApB,EAAAqB,EAAAD,GAAA,QAAApB,EAAAsB,IAGD,OADAC,OAAOC,iBAAiB,SAAUpC,GAC3B,WACLmC,OAAOE,oBAAoB,SAAUrC,GACrCE,EAAMoC,aAId,CAAC5C,EAAQF,IAIT+C,IAAAC,cAAA,OAAKC,IAAK9C,KCnEZ+C,IAASC,OACPJ,IAAAC,cAACD,IAAMK,WAAU,KACfL,IAAAC,cAACK,oBAAiB,KAChBN,IAAAC,cAACnD,EAAiB,QAGtByD,SAASC,eAAe,W","file":"static/js/main.2227d56f.chunk.js","sourcesContent":["import { useRenderData } from \"streamlit-component-lib-react-hooks\"\nimport { createChart } from \"lightweight-charts\"\nimport React, { useRef, useEffect } from \"react\"\n\nconst LightweightCharts: React.VFC = () => {\n\n  // returns the renderData passed from Python\n  // { args: object, disabled: boolean, theme: object }\n  const renderData = useRenderData()  \n  const chartOptions = renderData.args[\"chartOptions\"]\n  const series = renderData.args[\"series\"]\n\n  const chartContainerRef = useRef<HTMLDivElement>(null)\n  \n  useEffect(\n\t\t() => {\n      if(chartContainerRef.current){\n        const handleResize = () => {\n          chart.applyOptions({ width: chartContainerRef?.current?.clientWidth })\n        }\n\n        const chart = createChart(chartContainerRef?.current, {\n          height: 300,\n          ...chartOptions,\n          width: chartContainerRef?.current?.clientWidth\n        })\n\n        chart.timeScale().fitContent();\n\n        for (const seriesObject of series){\n          \n          let newSeries\n          switch(seriesObject.type) {\n            case 'Area':\n              newSeries = chart.addAreaSeries(seriesObject.options)\n              break\n            case 'Bar':\n              newSeries = chart.addBarSeries(seriesObject.options )\n              break\n            case 'Baseline':\n              newSeries = chart.addBaselineSeries(seriesObject.options)\n              break\n            case 'Candlestick':\n              newSeries = chart.addCandlestickSeries(seriesObject.options)\n              break\n            case 'Histogram':\n              newSeries = chart.addHistogramSeries(seriesObject.options)\n              break\n            case 'Line':\n              newSeries = chart.addLineSeries(seriesObject.options)\n              break\n            default:\n                return\n          }\n\n          if(seriesObject.priceScale)\n            chart.priceScale(seriesObject.options.priceScaleId || '').applyOptions(seriesObject.priceScale)\n\n          newSeries.setData(seriesObject.data)\n        }\n\n        window.addEventListener('resize', handleResize)\n        return () => { // required because how useEffect() works \n          window.removeEventListener('resize', handleResize)\n          chart.remove()\n        }\n      }\n\t\t},\n\t\t[series, chartOptions]\n\t)\n\n\treturn (\n\t\t<div ref={chartContainerRef} />\n\t)\n}\n\nexport default LightweightCharts\n","import React from \"react\"\nimport ReactDOM from \"react-dom\"\nimport { StreamlitProvider } from \"streamlit-component-lib-react-hooks\"\nimport LightweightCharts from \"./LightweightCharts\"\n\nReactDOM.render(\n  <React.StrictMode>\n    <StreamlitProvider>\n      <LightweightCharts />\n    </StreamlitProvider>\n  </React.StrictMode>,\n  document.getElementById(\"root\")\n)\n"],"sourceRoot":""}